<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>World Clock - Shivam</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Orbitron:wght@500&display=swap');

  body {
    margin: 0;
    padding: 0;
    font-family: 'Inter', sans-serif;
    text-align: center;
    overflow-x: hidden;
    color: white;
    background: url('https://images.pexels.com/photos/912050/pexels-photo-912050.jpeg?auto=compress&cs=tinysrgb&w=3840&h=2160&dpr=1') 
                no-repeat center center fixed;
    background-size: cover;
    min-height: 100vh;
    position: relative;
  }

  /* Dark overlay for readability */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    z-index: 0;
  }

  header {
    padding: 25px;
    font-size: 2em;
    font-weight: 600;
    position: relative;
    z-index: 2;
  }

  .greeting, .date {
    position: relative;
    z-index: 2;
    text-shadow: 0 2px 6px rgba(0,0,0,0.6);
  }

  .greeting {
    font-size: 1.2em;
    opacity: 0.9;
    margin-bottom: 8px;
  }
  .date {
    font-size: 1em;
    opacity: 0.85;
    margin-bottom: 30px;
  }

  /* Clock container with glass effect */
  .clock-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    padding: 20px;
    max-width: 900px;
    margin: auto;
    position: relative;
    z-index: 2;
  }
  .clock {
    background: rgba(255, 255, 255, 0.15);
    padding: 20px;
    border-radius: 16px;
    backdrop-filter: blur(10px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  }
  .city {
    font-weight: 600;
    margin-bottom: 8px;
  }
  .time {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.6em;
  }
  .colon {
    animation: smoothBlink 1.5s ease-in-out infinite;
  }
  @keyframes smoothBlink {
    0%, 100% { opacity: 1; }
    50%      { opacity: 0; }
  }

  .weather, .quote {
    max-width: 600px;
    margin: 30px auto;
    padding: 15px;
    border-radius: 12px;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(8px);
    font-size: 1em;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    z-index: 2;
    position: relative;
  }
  .weather-icon {
    font-size: 2em;
    display: block;
    margin-bottom: 5px;
  }
</style>
</head>
<body>
  <header>‚úàÔ∏è World Clock</header>
  <div class="greeting" id="greeting"></div>
  <div class="date" id="date"></div>

  <div class="clock-container" id="clocks"></div>

  <div class="weather" id="weather">
    <span class="weather-icon" id="weather-icon">‚è≥</span>
    <span id="weather-text">Loading Winnipeg weather...</span>
  </div>

  <div class="quote" id="quote">Loading quote...</div>

<script>
  const timeZones = [
    { city: "Mountain (Calgary)", zone: "America/Edmonton" },
    { city: "Central (Winnipeg)", zone: "America/Winnipeg" },
    { city: "Eastern (Toronto)", zone: "America/Toronto" },
    { city: "Zulu (UTC)", zone: "UTC" }
  ];

  function updateGreetingAndTheme() {
    const now = new Date();
    const hour = now.getHours();
    document.getElementById("date").textContent = now.toLocaleDateString("en-US", {
      weekday: "long", year: "numeric", month: "long", day: "numeric"
    });

    if (hour >= 5 && hour < 12) {
      document.getElementById("greeting").textContent = "‚òÄÔ∏è Good Morning, Shivam";
    } else if (hour >= 12 && hour < 18) {
      document.getElementById("greeting").textContent = "üå§Ô∏è Good Afternoon, Shivam";
    } else {
      document.getElementById("greeting").textContent = "üåô Good Evening, Shivam";
    }
  }

  function initClocks() {
    const container = document.getElementById("clocks");
    timeZones.forEach(tz => {
      const clockDiv = document.createElement("div");
      clockDiv.className = "clock";
      clockDiv.innerHTML = `
        <div class="city">${tz.city}</div>
        <div class="time" id="time-${tz.zone.replace(/\//g, "_")}">--<span class="colon">:</span>--</div>
      `;
      container.appendChild(clockDiv);
    });
  }

  function updateClocks() {
    timeZones.forEach(tz => {
      const [hours, minutes] = new Date().toLocaleTimeString("en-GB", {
        timeZone: tz.zone,
        hour: "2-digit",
        minute: "2-digit",
        hour12: false
      }).split(":");
      document.getElementById(`time-${tz.zone.replace(/\//g, "_")}`).innerHTML =
        `${hours}<span class="colon">:</span>${minutes}`;
    });
  }

  function fetchWeatherWinnipeg() {
    fetch(`https://api.open-meteo.com/v1/forecast?latitude=49.8951&longitude=-97.1384&current_weather=true`)
      .then(res => res.json())
      .then(data => {
        const w = data.current_weather;
        let icon = "üå§Ô∏è";
        if (w.weathercode < 3) icon = "‚òÄÔ∏è";
        else if (w.weathercode < 50) icon = "üå§Ô∏è";
        else if (w.weathercode < 70) icon = "üåßÔ∏è";
        else if (w.weathercode < 80) icon = "‚ùÑÔ∏è";
        else icon = "‚õÖ";
        document.getElementById("weather-icon").textContent = icon;
        document.getElementById("weather-text").textContent =
          `${w.temperature}¬∞C | ${w.windspeed} km/h | Central Time (Winnipeg)`;
      })
      .catch(() => {
        document.getElementById("weather-text").textContent = "Unable to fetch Winnipeg weather";
        document.getElementById("weather-icon").textContent = "‚ö†Ô∏è";
      });
  }

  function fetchQuote() {
    fetch("https://zenquotes.io/api/random")
      .then(res => res.json())
      .then(data => {
        const quoteText = data[0]?.q || "Time is precious ‚Äî use it wisely.";
        const quoteAuthor = data[0]?.a || "Unknown";
        document.getElementById("quote").textContent = `üí¨ "${quoteText}" ‚Äî ${quoteAuthor}`;
      })
      .catch(() => {
        document.getElementById("quote").textContent = "üí¨ Time is precious ‚Äî use it wisely.";
      });
  }

  function rotateQuotes() {
    fetchQuote();
    setInterval(fetchQuote, 30000);
  }

  function refresh() {
    updateGreetingAndTheme();
    updateClocks();
  }

  // Sync updates to exact minute
  function startClockSync() {
    refresh(); // instant update on load
    const now = new Date();
    const delay = (60 - now.getSeconds()) * 1000 - now.getMilliseconds();
    setTimeout(function tick() {
      refresh();
      setInterval(refresh, 60000);
    }, delay);
  }

  // Initialize everything
  initClocks();
  fetchWeatherWinnipeg();
  rotateQuotes();
  startClockSync();

  // Auto-refresh weather every hour
  setInterval(fetchWeatherWinnipeg, 3600000);
</script>
</body>
</html>
